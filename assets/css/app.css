/* KTC Invoice Pro - Styles principaux */

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===================================
   LAYER BASE - Styles de base
   =================================== */
@layer base {
    html {
        @apply scroll-smooth;
    }

    body {
        @apply bg-gray-50 text-gray-900 antialiased;
        font-feature-settings: "cv02", "cv03", "cv04", "cv11";
    }

    /* Focus visible pour l'accessibilité */
    *:focus-visible {
        @apply outline-2 outline-offset-2 outline-primary-500;
    }

    /* Sélection de texte */
    ::selection {
        @apply bg-primary-100 text-primary-900;
    }
}

/* ===================================
   LAYER COMPONENTS - Composants réutilisables
   =================================== */
@layer components {
    /* Boutons */
    .btn {
        @apply inline-flex items-center justify-center gap-2 px-4 py-2 
               text-sm font-medium rounded-lg transition-all duration-200
               focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2
               disabled:opacity-50 disabled:cursor-not-allowed;
    }

    .btn-primary {
        @apply btn bg-primary-600 text-white 
               hover:bg-primary-700 active:bg-primary-800
               focus-visible:ring-primary-500;
    }

    .btn-secondary {
        @apply btn bg-white text-gray-700 border border-gray-300
               hover:bg-gray-50 active:bg-gray-100
               focus-visible:ring-gray-500;
    }

    .btn-success {
        @apply btn bg-success-600 text-white
               hover:bg-success-700 active:bg-success-700
               focus-visible:ring-success-500;
    }

    .btn-danger {
        @apply btn bg-danger-600 text-white
               hover:bg-danger-700 active:bg-danger-700
               focus-visible:ring-danger-500;
    }

    .btn-ghost {
        @apply btn text-gray-600 
               hover:bg-gray-100 active:bg-gray-200
               focus-visible:ring-gray-500;
    }

    .btn-sm {
        @apply px-3 py-1.5 text-xs;
    }

    .btn-lg {
        @apply px-6 py-3 text-base;
    }

    .btn-icon {
        @apply p-2;
    }

    /* Cards */
    .card {
        @apply bg-white rounded-xl shadow-soft border border-gray-100;
    }

    .card-header {
        @apply px-6 py-4 border-b border-gray-100;
    }

    .card-body {
        @apply p-6;
    }

    .card-footer {
        @apply px-6 py-4 border-t border-gray-100 bg-gray-50/50 rounded-b-xl;
    }

    /* Forms */
    .form-group {
        @apply space-y-1.5;
    }

    .form-label {
        @apply block text-sm font-medium text-gray-700;
    }

    .form-input {
        @apply block w-full px-3 py-2 text-sm
               border border-gray-300 rounded-lg
               placeholder:text-gray-400
               focus:border-primary-500 focus:ring-1 focus:ring-primary-500
               disabled:bg-gray-50 disabled:text-gray-500;
    }

    .form-select {
        @apply form-input pr-10 bg-no-repeat appearance-none
               bg-[url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")]
               bg-[length:1.25rem_1.25rem] bg-[right_0.5rem_center];
    }

    .form-textarea {
        @apply form-input resize-y min-h-[100px];
    }

    .form-checkbox {
        @apply h-4 w-4 text-primary-600 border-gray-300 rounded
               focus:ring-primary-500;
    }

    .form-error {
        @apply text-xs text-danger-600 mt-1;
    }

    .form-hint {
        @apply text-xs text-gray-500 mt-1;
    }

    /* Tables */
    .table-container {
        @apply overflow-x-auto rounded-lg border border-gray-200;
    }

    .table {
        @apply min-w-full divide-y divide-gray-200;
    }

    .table th {
        @apply px-4 py-3 text-left text-xs font-semibold text-gray-600 
               uppercase tracking-wider bg-gray-50;
    }

    .table td {
        @apply px-4 py-3 text-sm text-gray-700 whitespace-nowrap;
    }

    .table tbody tr {
        @apply hover:bg-gray-50 transition-colors;
    }

    .table tbody tr:not(:last-child) {
        @apply border-b border-gray-100;
    }

    /* Badges */
    .badge {
        @apply inline-flex items-center px-2.5 py-0.5 rounded-full 
               text-xs font-medium;
    }

    .badge-primary {
        @apply badge bg-primary-100 text-primary-800;
    }

    .badge-success {
        @apply badge bg-success-50 text-success-700;
    }

    .badge-warning {
        @apply badge bg-warning-50 text-warning-700;
    }

    .badge-danger {
        @apply badge bg-danger-50 text-danger-700;
    }

    .badge-gray {
        @apply badge bg-gray-100 text-gray-700;
    }

    /* Alerts */
    .alert {
        @apply p-4 rounded-lg flex gap-3;
    }

    .alert-info {
        @apply alert bg-info-50 text-info-700;
    }

    .alert-success {
        @apply alert bg-success-50 text-success-700;
    }

    .alert-warning {
        @apply alert bg-warning-50 text-warning-700;
    }

    .alert-danger {
        @apply alert bg-danger-50 text-danger-700;
    }

    /* Navigation Sidebar */
    .sidebar {
        @apply fixed inset-y-0 left-0 z-40 w-64 bg-white border-r border-gray-200
               transform transition-transform duration-200 ease-in-out
               lg:translate-x-0 lg:static;
    }

    .sidebar-nav-item {
        @apply flex items-center gap-3 px-4 py-2.5 text-sm font-medium
               text-gray-600 rounded-lg transition-colors
               hover:bg-gray-100 hover:text-gray-900;
    }

    .sidebar-nav-item.active {
        @apply bg-primary-50 text-primary-700;
    }

    /* Dropdown */
    .dropdown {
        @apply relative inline-block;
    }

    .dropdown-menu {
        @apply absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg
               border border-gray-100 py-1 z-50
               opacity-0 invisible transform scale-95
               transition-all duration-150 ease-out;
    }

    .dropdown-menu.show {
        @apply opacity-100 visible scale-100;
    }

    .dropdown-item {
        @apply block px-4 py-2 text-sm text-gray-700 
               hover:bg-gray-50 transition-colors;
    }

    /* Modal */
    .modal-backdrop {
        @apply fixed inset-0 bg-black/50 z-50 
               opacity-0 invisible transition-opacity duration-200;
    }

    .modal-backdrop.show {
        @apply opacity-100 visible;
    }

    .modal {
        @apply fixed inset-0 z-50 flex items-center justify-center p-4
               opacity-0 invisible transition-all duration-200;
    }

    .modal.show {
        @apply opacity-100 visible;
    }

    .modal-content {
        @apply bg-white rounded-2xl shadow-xl max-w-lg w-full max-h-[90vh] overflow-hidden
               transform scale-95 transition-transform duration-200;
    }

    .modal.show .modal-content {
        @apply scale-100;
    }

    /* Pagination */
    .pagination {
        @apply flex items-center gap-1;
    }

    .pagination-item {
        @apply px-3 py-1.5 text-sm font-medium rounded-lg transition-colors;
    }

    .pagination-item:not(.active):not(.disabled) {
        @apply text-gray-600 hover:bg-gray-100;
    }

    .pagination-item.active {
        @apply bg-primary-600 text-white;
    }

    .pagination-item.disabled {
        @apply text-gray-400 cursor-not-allowed;
    }

    /* Stats Cards */
    .stat-card {
        @apply card p-6;
    }

    .stat-value {
        @apply text-2xl font-bold text-gray-900;
    }

    .stat-label {
        @apply text-sm text-gray-500 mt-1;
    }

    .stat-change {
        @apply text-xs font-medium mt-2;
    }

    .stat-change.positive {
        @apply text-success-600;
    }

    .stat-change.negative {
        @apply text-danger-600;
    }
}

/* ===================================
   LAYER UTILITIES - Utilitaires personnalisés
   =================================== */
@layer utilities {
    /* Scrollbar personnalisée */
    .scrollbar-thin {
        scrollbar-width: thin;
        scrollbar-color: theme('colors.gray.300') transparent;
    }

    .scrollbar-thin::-webkit-scrollbar {
        width: 6px;
        height: 6px;
    }

    .scrollbar-thin::-webkit-scrollbar-track {
        background: transparent;
    }

    .scrollbar-thin::-webkit-scrollbar-thumb {
        background-color: theme('colors.gray.300');
        border-radius: 3px;
    }

    .scrollbar-thin::-webkit-scrollbar-thumb:hover {
        background-color: theme('colors.gray.400');
    }

    /* Text truncate multi-ligne */
    .line-clamp-1 {
        overflow: hidden;
        display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 1;
    }

    .line-clamp-2 {
        overflow: hidden;
        display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 2;
    }

    .line-clamp-3 {
        overflow: hidden;
        display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 3;
    }

    /* Gradient text */
    .text-gradient {
        @apply bg-clip-text text-transparent bg-gradient-to-r from-primary-600 to-primary-400;
    }
}

/* ===================================
   PRINT STYLES
   =================================== */
@media print {
    .no-print {
        display: none !important;
    }

    body {
        @apply bg-white text-black;
    }

    .card {
        @apply shadow-none border-gray-300;
    }
}
