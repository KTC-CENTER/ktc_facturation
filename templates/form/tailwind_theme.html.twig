{% use 'form_div_layout.html.twig' %}

{# ===== ROW ===== #}
{% block form_row %}
    <div class="mb-4">
        {{ form_label(form) }}
        {{ form_widget(form) }}
        {{ form_help(form) }}
        {{ form_errors(form) }}
    </div>
{% endblock %}

{# ===== LABEL ===== #}
{% block form_label %}
    {% if label is not same as(false) %}
        {% set label_attr = label_attr|merge({'class': 'block text-sm font-medium text-gray-700 mb-1 ' ~ (label_attr.class is defined ? label_attr.class : '')}) %}
        <label{% if id is not empty %} for="{{ id }}"{% endif %}{% with { attr: label_attr } %}{{ block('attributes') }}{% endwith %}>
            {{ label is not empty ? (translation_domain is same as(false) ? label : label|trans({}, translation_domain)) : name|humanize }}
            {% if required %}<span class="text-red-500">*</span>{% endif %}
        </label>
    {% endif %}
{% endblock %}

{# ===== ERRORS ===== #}
{% block form_errors %}
    {% if errors|length > 0 %}
        {% for error in errors %}
            <p class="mt-1 text-sm text-red-600">{{ error.message }}</p>
        {% endfor %}
    {% endif %}
{% endblock %}

{# ===== HELP ===== #}
{% block form_help %}
    {% if help is not empty %}
        <p class="mt-1 text-xs text-gray-500">{{ translation_domain is same as(false) ? help : help|trans({}, translation_domain) }}</p>
    {% endif %}
{% endblock %}

{# ===== TEXT INPUT ===== #}
{% block form_widget_simple %}
    {% set type = type|default('text') %}
    {% set attr = attr|merge({'class': 'block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm shadow-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500 disabled:bg-gray-100 disabled:text-gray-500 ' ~ (attr.class is defined ? attr.class : '')}) %}
    <input type="{{ type }}" {{ block('widget_attributes') }} {% if value is not empty %}value="{{ value }}"{% endif %} />
{% endblock %}

{# ===== TEXTAREA ===== #}
{% block textarea_widget %}
    {% set attr = attr|merge({'class': 'block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm shadow-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500 ' ~ (attr.class is defined ? attr.class : '')}) %}
    <textarea {{ block('widget_attributes') }}>{{ value }}</textarea>
{% endblock %}

{# ===== SELECT ===== #}
{% block choice_widget_collapsed %}
    {% set attr = attr|merge({'class': 'block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm shadow-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500 bg-white ' ~ (attr.class is defined ? attr.class : '')}) %}
    {{ parent() }}
{% endblock %}

{# ===== CHECKBOX ===== #}
{% block checkbox_widget %}
    {% set attr = attr|merge({'class': 'h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 ' ~ (attr.class is defined ? attr.class : '')}) %}
    <input type="checkbox" {{ block('widget_attributes') }}{% if value is defined %} value="{{ value }}"{% endif %}{% if checked %} checked="checked"{% endif %} />
{% endblock %}

{% block checkbox_row %}
    <div class="mb-4 flex items-start gap-3">
        {{ form_widget(form) }}
        <div>
            {{ form_label(form, null, {'label_attr': {'class': 'text-sm font-medium text-gray-700'}}) }}
            {{ form_help(form) }}
            {{ form_errors(form) }}
        </div>
    </div>
{% endblock %}

{# ===== RADIO ===== #}
{% block radio_widget %}
    {% set attr = attr|merge({'class': 'h-4 w-4 border-gray-300 text-blue-600 focus:ring-blue-500 ' ~ (attr.class is defined ? attr.class : '')}) %}
    <input type="radio" {{ block('widget_attributes') }}{% if value is defined %} value="{{ value }}"{% endif %}{% if checked %} checked="checked"{% endif %} />
{% endblock %}

{# ===== DATE ===== #}
{% block date_widget %}
    {% if widget == 'single_text' %}
        {{ block('form_widget_simple') }}
    {% else %}
        <div class="flex gap-2">
            {{ form_widget(form.year) }}
            {{ form_widget(form.month) }}
            {{ form_widget(form.day) }}
        </div>
    {% endif %}
{% endblock %}

{# ===== FILE ===== #}
{% block file_widget %}
    {% set attr = attr|merge({'class': 'block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 border border-gray-300 rounded-lg cursor-pointer ' ~ (attr.class is defined ? attr.class : '')}) %}
    <input type="file" {{ block('widget_attributes') }} />
{% endblock %}

{# ===== HIDDEN ===== #}
{% block hidden_row %}
    {{ form_widget(form) }}
{% endblock %}

{# ===== BUTTON ===== #}
{% block button_widget %}
    {% set attr = attr|merge({'class': 'inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ' ~ (attr.class is defined ? attr.class : '')}) %}
    <button type="{{ type|default('button') }}" {{ block('button_attributes') }}>{{ translation_domain is same as(false) ? label : label|trans({}, translation_domain) }}</button>
{% endblock %}

{# ===== COLLECTION ===== #}
{% block collection_widget %}
    {% if prototype is defined and not prototype.rendered %}
        {% set attr = attr|merge({'data-prototype': form_row(prototype)}) %}
    {% endif %}
    {{ block('form_widget') }}
{% endblock %}

{# ===== NUMBER ===== #}
{% block number_widget %}
    {% set type = type|default('number') %}
    {{ block('form_widget_simple') }}
{% endblock %}

{# ===== INTEGER ===== #}
{% block integer_widget %}
    {% set type = type|default('number') %}
    {{ block('form_widget_simple') }}
{% endblock %}

{# ===== MONEY ===== #}
{% block money_widget %}
    {{ parent() }}
{% endblock %}

{# ===== PERCENT ===== #}
{% block percent_widget %}
    {{ parent() }}
{% endblock %}

{# ===== URL ===== #}
{% block url_widget %}
    {% set type = type|default('url') %}
    {{ block('form_widget_simple') }}
{% endblock %}

{# ===== EMAIL ===== #}
{% block email_widget %}
    {% set type = type|default('email') %}
    {{ block('form_widget_simple') }}
{% endblock %}

{# ===== REPEATED ===== #}
{% block repeated_row %}
    {{ block('form_rows') }}
{% endblock %}
